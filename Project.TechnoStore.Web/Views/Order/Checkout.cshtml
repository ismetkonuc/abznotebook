@model OrderViewModel
@{
    Layout = "_AccountLayout";
}

<div class="container-fluid">
    <div class="row">
        @if (User.Identity.IsAuthenticated)
        {
            <div class="col-md-12 mx-auto my-4">
                
                @if (@Model.LinesCount > 0)
                {
                    @foreach (var address in Model.Addresses)
                    {
                        <partial name="AddressPartial" model="address" />
                    }


                    <form method="post" asp-action="Checkout" enctype="multipart/form-data">
                        <div class="col-md-4 my-2 mx-3">
                            <div class="form-group">
                                <label asp-for="AddressId">Adresler</label>
                                <select class="form-control" asp-for="AddressId" asp-items="@Model.AddressCollection">
                                    <option hidden value="">Seç</option>
                                </select>
                                <span asp-validation-for="AddressId" class="text-danger">Lütfen bir adres seçiniz.</span>
                            </div>

                            <div class="form-group">
                                <label asp-for="PaymentId">Ödeme Yöntemi</label>
                                <select class="form-control" asp-for="PaymentId" asp-items="@Model.PaymentCollection">
                                    <option hidden value="">Seç</option>
                                </select>
                                <span asp-validation-for="PaymentId" class="text-danger">Lütfen bir ödeme yöntemi seçiniz.</span>
                            </div>

                            <div class="form-group">
                                <label asp-for="ShipperId">Kargo Firması</label>
                                <select class="form-control" asp-for="ShipperId" asp-items="@Model.ShipperCollection">
                                    <option hidden value="">Seç</option>
                                </select>
                                <span asp-validation-for="ShipperId" class="text-danger">Lütfen bir kargo şirketi seçiniz.</span>
                            </div>
                            <button type="submit" class="btn btn-outline-success ">Ödemeyi Tamamla</button>
                        </div>
                    </form>
                }

                else
                {
                    <h3 class="text-center text-danger">Alışveriş yapabilmeniz için sepetinizde ürün olmalı.</h3>
                }
            </div>


        }

        else
        {
            <div class="col-md-5"></div>
            <div class="col-md-6">
                Alışveriş yapabilmeniz için
                <a asp-controller="Account" asp-action="Login" class="text-center" asp-route-data="order">giriş yapmalısınız.</a>
            </div>
        }

    </div>
</div>